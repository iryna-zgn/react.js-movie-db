(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(43)},31:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),s=(a(31),a(2)),i=a(3),l=a(6),u=a(4),m=a(7),d=a(5),p={POPULAR:"popular",SEARCH:"search"},v={IS_FOCUS:"is-focus",IS_FIXED:"is-fixed",IS_SMALL:"is-small"},g={LOAD_MOVIES:"LOAD_MOVIES",LOAD_GENRES:"LOAD_GENRES",LOAD_NEXT_PAGE:"LOAD_NEXT_PAGE",SET_QUERY:"SET_QUERY",START:"START",SUCCESS:"SUCCESS",ERR:"ERR"},h="ac710db081029f2383b7c329b25a753a",E="https://api.themoviedb.org",f="".concat(E,"/3/movie/popular?api_key=").concat(h),_="".concat(E,"/3/search/movie?api_key=").concat(h),y="https://image.tmdb.org/t/p/w500/",b="".concat(E,"/3/genre/list?api_key=").concat(h);function O(e,t,a){return t===p.POPULAR?"".concat(f,"&page=").concat(e):"".concat(_,"&query=").concat(a,"&page=").concat(e)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.POPULAR,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:g.LOAD_MOVIES,payload:{page:e,mode:t,query:a},callAPI:O(e,t,a)}}var A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isFocus:!1},a.handleChange=function(e){return a.props.setQuery(e.target.value)},a.handleSubmit=function(e){var t=a.props,n=t.query,r=t.lastQuery;e.preventDefault(),n&&n!==r&&a.props.loadMovies(1,p.SEARCH,n)},a.addFocus=function(){a.setState({isFocus:!0})},a.removeFocus=function(){a.setState({isFocus:!1})},a.loadPopular=function(){a.props.loadMovies()},a.renderSearchMsg=function(){if(!a.props.total_results)return r.a.createElement("div",null,r.a.createElement("div",{className:"search__msg"},"No results :("),r.a.createElement("div",{onClick:a.loadPopular,className:"search__link"},"Popular movies"))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="search__field";return this.state.isFocus&&(e+=" ".concat(v.IS_FOCUS)),r.a.createElement("div",{className:"search"},r.a.createElement("form",{className:"search__form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:e},r.a.createElement("input",{value:this.props.query,type:"text",onChange:this.handleChange,onFocus:this.addFocus,onBlur:this.removeFocus})),r.a.createElement("button",{className:"search__btn icon-search"})),this.renderSearchMsg())}}]),t}(n.Component),N=Object(d.b)(function(e){return{query:e.movies.query,lastQuery:e.movies.lastQuery,total_results:e.movies.total_results}},{loadMovies:S,setQuery:function(e){return{type:g.SET_QUERY,payload:{query:e}}}})(A);function j(e){var t="logo";return e.isSmall&&(t+=" ".concat(v.IS_SMALL)),r.a.createElement("div",{className:t},r.a.createElement("a",{href:e.link||"#",title:e.title,target:e.isTargetBlank?"_blank":"_self",className:"logo__link",rel:"noopener noreferrer"},r.a.createElement("span",{className:"logo__main"},"rho"),r.a.createElement("span",{className:"logo__text"},e.text)))}function k(){return r.a.createElement("header",{className:"header"},r.a.createElement(j,{text:"movies",link:"/"}),r.a.createElement(N,null))}var w=a(11),C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).getYear=function(e){return e.slice(0,4)},a.getImg=function(e){return e?"".concat(y).concat(e):"static/images/rho_light.jpg"},a.getGenres=function(e){var t=a.props.genres,n=new Set;return e.forEach(function(e){t.forEach(function(t){t.id===e&&n.add(t)})}),Object(w.a)(n)},a.renderGenres=function(e){return a.getGenres(e).map(function(e,t){return r.a.createElement("span",{key:e.id},t?", ".concat(e.name.toLowerCase()):e.name)})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.movie;return r.a.createElement("div",{className:"movie"},r.a.createElement("div",{className:"movie__img",style:{backgroundImage:"url(".concat(this.getImg(e.poster_path),")")}},r.a.createElement("img",{src:"static/images/dummy_420x630.jpg",alt:"",className:"u-dummy"})),r.a.createElement("div",null,r.a.createElement("h2",{className:"movie__title"},e.title),r.a.createElement("div",{className:"movie__prop"},this.renderGenres(e.genre_ids)),r.a.createElement("div",{className:"movie__prop"},this.getYear(e.release_date)),r.a.createElement("div",{className:"movie__desc"},e.overview),r.a.createElement("div",{className:"movie__link"},"Read more")))}}]),t}(n.Component);function L(e){var t="preloader";return e.isFixed&&(t+=" ".concat(v.IS_FIXED)),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"preloader__inner"}))}var M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClickMore=function(){var e=a.props,t=e.page,n=e.mode,r=e.query;a.props.loadNextPage(t+1,n,r)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"load-more"},this.props.loadingMore?r.a.createElement("div",{className:"load-more__preloader"},r.a.createElement(L,null)):r.a.createElement("div",{onClick:this.handleClickMore,className:"load-more__link"},"Load more"))}}]),t}(n.Component),P=Object(d.b)(function(e){return{page:e.movies.page,loadingMore:e.movies.loadingMore,mode:e.movies.mode,query:e.movies.query}},{loadNextPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.POPULAR,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:g.LOAD_NEXT_PAGE,payload:{page:e,mode:t,query:a},callAPI:O(e,t,a)}}})(M),R=a(17),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderItems=function(){var e=a.props,t=e.movies,n=e.genres;return t.map(function(e){return r.a.createElement(R.CSSTransition,{key:e.id,classNames:"fade",timeout:{appear:500,enter:500,exit:500},appear:!0},r.a.createElement("div",{className:"movies-list__item"},r.a.createElement(C,{movie:e,genres:n})))})},a.renderLoadMore=function(){var e=a.props,t=e.pages,n=e.page;if(t>1&&n!==t)return r.a.createElement(P,null)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"movies-list"},r.a.createElement(R.TransitionGroup,null,this.renderItems())),this.renderLoadMore())}},{key:"componentDidMount",value:function(){this.props.loadMovies(),this.props.loadGenres()}}]),t}(n.Component),T=Object(d.b)(function(e){return{movies:e.movies.results,genres:e.genres.genres,pages:e.movies.total_pages,page:e.movies.page,loadingMore:e.movies.loadingMore,mode:e.movies.mode,query:e.movies.query}},{loadMovies:S,loadGenres:function(){return{type:g.LOAD_GENRES,callAPI:b}}})(I),q=[{name:"github",url:"https://github.com/iryna-zgn",isActive:!0},{name:"instagram",url:"https://www.instagram.com/dmytruk.i/",isActive:!0},{name:"facebook",url:"#",isActive:!1}],D=function(){return q.map(function(e){return e.isActive?r.a.createElement("li",{key:e.name,className:"soc-links__item"},r.a.createElement("a",{href:e.url,title:e.name,className:"soc-links__link",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"soc-links__icon icon-".concat(e.name)}))):null})};function U(){return r.a.createElement("ul",{className:"soc-links"},D())}function F(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer__inline"},r.a.createElement(U,null),r.a.createElement(j,{link:"https://rho-blog.github.io/rho/",text:"blog",isSmall:!0,isTargetBlank:!0,title:"rho blog"})),r.a.createElement("div",{className:"footer__copyright"},"\xa9 ",(new Date).getFullYear()))}var G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderPreloader=function(){if(a.props.loading)return r.a.createElement(L,{isFixed:!0})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(T,null)),r.a.createElement(F,null),this.renderPreloader())}}]),t}(n.Component),x=Object(d.b)(function(e){return{loading:e.movies.loading}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(8),X=a(9);function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.a;return Object.keys(e).reduce(function(t,a){return t.set(a,e[a])},new t)}var B=Object(X.b)({results:[],total_pages:1,page:1,total_results:0,loading:!1,loadingMore:!1,mode:p.POPULAR,query:"",lastQuery:""}),V=Object(X.b)({genres:[]}),H=Object(Q.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new B,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=t.response;switch(a){case g.LOAD_MOVIES+g.START:return e.set("loading",!0);case g.LOAD_MOVIES+g.SUCCESS:return Y(r,B).set("query",n.query).set("lastQuery",n.query).set("mode",n.mode).set("loading",!1);case g.LOAD_NEXT_PAGE+g.START:return e.set("loadingMore",!0);case g.LOAD_NEXT_PAGE+g.SUCCESS:return e.set("page",n.page).set("results",[].concat(Object(w.a)(e.results),Object(w.a)(r.results))).set("loadingMore",!1);case g.SET_QUERY:return e.set("query",n.query);default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new V,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.response;switch(a){case g.LOAD_GENRES+g.SUCCESS:return Y(n,V);default:return e}}}),J=a(13),W=a(25),z=Object(Q.a)(function(e){return function(e){return function(t){var a=t.callAPI,n=t.type,r=Object(W.a)(t,["callAPI","type"]);if(!a)return e(t);e(Object(J.a)({},r,{type:n+g.START})),setTimeout(function(){fetch(a).then(function(e){return e.json()}).then(function(t){return e(Object(J.a)({},r,{type:n+g.SUCCESS,response:t}))}).catch(function(t){return e(Object(J.a)({},r,{type:n+g.ERR,err:t}))})},700)}}}),$=Object(Q.d)(H,{},z);window.store=$;var K=$;c.a.render(r.a.createElement(d.a,{store:K},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.5c89119c.chunk.js.map